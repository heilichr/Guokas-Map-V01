<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>ESRI World Imagery with Trails, Stands, Contours, and Parcels</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Leaflet CSS -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>

<style>
  html, body {
    height: 100%;
    margin: 0;
  }
  #map {
    height: 100%;
    width: 100%;
  }

  /* Stand labels */
  .stand-label {
    font-size: 12px;
    font-weight: bold;
    color: black;
    background: rgba(255, 255, 255, 0.75);
    border: 1px solid #333;
    border-radius: 3px;
    padding: 1px 4px;
    white-space: nowrap;
  }
</style>
</head>
<body>

<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
  // ====================
  // Initialize Map
  // ====================
  const map = L.map('map').setView([44.18125, -89.48712], 16);

  // ====================
  // Base Map
  // ====================
  const esriImagery = L.tileLayer(
    'https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}',
    {
      attribution: 'Tiles © Esri',
      maxZoom: 19
    }
  ).addTo(map);

  // ====================
  // STYLE DEFINITIONS
  // ====================

  const trailStyle = { color: "#a3783e", weight: 3, opacity: 1 };

  const contoursWaterStyle = {
    color: "#5891a4",
    weight: 1,
    opacity: 1,
    fillColor: "#4e9be8",
    fillOpacity: 0.4
  };

  const contours1100Style = { color: "#8f8f8f", weight: 1, opacity: 1 };
  const contours3Style = { color: "#8f8f8f", weight: 0.75, opacity: 0.9 };

  const standStyle = {
    radius: 5,
    fillColor: "yellow",
    color: "black",
    weight: 1,
    fillOpacity: 0.9
  };

  const parcelsStyle = {
    color: "red",
    weight: 0.7,
    opacity: 0.8,
    fillOpacity: 0
  };

  // ====================
  // Trails
  // ====================
  const trailsLayer = L.layerGroup().addTo(map);
  fetch('Trails.geojson')
    .then(r => r.json())
    .then(d => L.geoJSON(d, { style: trailStyle }).addTo(trailsLayer));

  // ====================
  // Contours & Water
  // ====================
  const contoursWaterLayer = L.layerGroup().addTo(map);
  fetch('contourswater.geojson')
    .then(r => r.json())
    .then(d => L.geoJSON(d, { style: contoursWaterStyle }).addTo(contoursWaterLayer));

  // ====================
  // 1100' Contours
  // ====================
  const contours1100Layer = L.layerGroup().addTo(map);
  fetch('contours1100.geojson')
    .then(r => r.json())
    .then(d => L.geoJSON(d, { style: contours1100Style }).addTo(contours1100Layer));

  // ====================
  // 3' Contours
  // ====================
  const contours3Layer = L.layerGroup().addTo(map);
  fetch('contours3.geojson')
    .then(r => r.json())
    .then(d => L.geoJSON(d, { style: contours3Style }).addTo(contours3Layer));

  // ====================
  // Stands (LABELED)
  // ====================
  const standsLayer = L.layerGroup().addTo(map);
  fetch('Stands.geojson')
    .then(r => r.json())
    .then(data => {
      L.geoJSON(data, {
        pointToLayer: (feature, latlng) => {
          const marker = L.circleMarker(latlng, standStyle);

          const label = feature.properties.Name; // ← EXACT FIELD NAME

          if (label) {
            marker.bindTooltip(label, {
              permanent: true,
              direction: "top",
              offset: [0, -8],
              className: "stand-label"
            });
          }
          return marker;
        }
      }).addTo(standsLayer);
    });

  // ====================
  // Parcels
  // ====================
  const parcelsLayer = L.layerGroup().addTo(map);
  fetch('Parcels.geojson')
    .then(r => r.json())
    .then(d => L.geoJSON(d, { style: parcelsStyle }).addTo(parcelsLayer));

  // ====================
  // Layer Control
  // ====================
  L.control.layers(
    { "ESRI World Imagery": esriImagery },
    {
      "Trails": trailsLayer,
      "Contours & Water": contoursWaterLayer,
      "1100' Contours": contours1100Layer,
      "3' Contours": contours3Layer,
      "Stands": standsLayer,
      "Parcels": parcelsLayer
    },
    { collapsed: true }
  ).addTo(map);
</script>

</body>
</html>
