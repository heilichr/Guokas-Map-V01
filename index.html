<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>ESRI World Imagery with Trails and Stands</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Leaflet CSS -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>

<style>
  html, body {
      height: 100%;
      margin: 0;
  }
  #map {
      height: 100%;
      width: 100%;
  }
</style>
</head>
<body>

<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
  // Initialize map
  const map = L.map('map').setView([44.18125, -89.48712], 13);

  // Base map
  const esriImagery = L.tileLayer(
    'https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}',
    { attribution: 'Tiles Â© Esri' }
  ).addTo(map);

  // --------------------
  // Trails Layer
  // --------------------
  const trailsLayer = L.layerGroup().addTo(map);

  const trailStyle = {
    color: "brown",
    weight: 4,
    opacity: 1
  };

  fetch('Trails.geojson')
    .then(res => res.json())
    .then(data => {
      const geojson = L.geoJSON(data, { style: trailStyle });
      trailsLayer.addLayer(geojson);
    })
    .catch(err => console.error("Error loading Trails.geojson:", err));

  // --------------------
  // Contours & Water Layer
  // --------------------
  const contoursWaterLayer = L.layerGroup().addTo(map);

  function contoursWaterStyle(feature) {
    // Style based on geometry or properties if present
    if (feature.geometry.type === "LineString" || feature.geometry.type === "MultiLineString") {
      // Contour lines
      return {
        color: "#c2b280",
        weight: 1,
        opacity: 0.8
      };
    }
    if (feature.geometry.type === "Polygon" || feature.geometry.type === "MultiPolygon") {
      // Water bodies
      return {
        color: "#5891a4",
        weight: 1,
        fillColor: "#4e9be8",
        fillOpacity: 0.5
      };
    }
  }

  fetch('contourswater.geojson')
    .then(res => res.json())
    .then(data => {
      L.geoJSON(data, {
        style: contoursWaterStyle
      }).addTo(contoursWaterLayer);
    })
    .catch(err => console.error("Error loading contourswater.geojson:", err));

  // --------------------
  // 1100' Contours Layer
  // --------------------
  const contours1100Layer = L.layerGroup().addTo(map);

  const contour1100Style = {
    color: "#c1b0b9",   
    weight: 2,
    opacity: 1
  };

  fetch('contours1100.geojson')
    .then(res => res.json())
    .then(data => {
      L.geoJSON(data, {
        style: contour1100Style
      }).addTo(contours1100Layer);
    })
    .catch(err => console.error("Error loading contours1100.geojson:", err));



  // --------------------
  // Stands Points Layer
  // --------------------
  const standsLayer = L.layerGroup().addTo(map);

  const standStyle = {
    radius: 6,
    fillColor: "Yellow",
    color: " black",
    weight: 1,
    fillOpacity: 0.9
  };

  fetch('Stands.geojson')
    .then(res => res.json())
    .then(data => {
      L.geoJSON(data, {
        pointToLayer: function(feature, latlng) {
          return L.circleMarker(latlng, standStyle);
        }
      }).addTo(standsLayer);
    })
    .catch(err => console.error("Error loading Stands.geojson:", err));

  // --------------------
  // Layer Control
  // --------------------
  L.control.layers(
  { "ESRI World Imagery": esriImagery },
  {
    "Trails": trailsLayer,
    "Contours & Water": contoursWaterLayer,
    "1100' Contours": contours1100Layer,
    "Stands": standsLayer
  },
  { collapsed: false }
).addTo(map);

</script>

</body>
</html>
