<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Stands and Trails Map</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link
  rel="stylesheet"
  href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
/>

<style>
html, body {
    height: 100%;
    margin: 0;
}
#map {
    height: 100%;
    width: 100%;
}

/* ===== LABEL STYLE (EDIT HERE) ===== */
.stand-label {
    font-size: 14px;      /* label size */
    color: #ffffff;       /* label color */
    font-weight: bold;
    text-shadow: 1px 1px 2px #000;
    white-space: nowrap;
}
</style>
</head>
<body>

<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>
// --------------------
// MAP SETUP
// --------------------
const map = L.map('map');

const esriImagery = L.tileLayer(
    'https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}',
    { attribution: 'Tiles Â© Esri' }
).addTo(map);

// --------------------
// EDITABLE STYLES
// --------------------

// Stands (points)
const standStyle = {
    radius: 6,            // point size
    fillColor: "#00ff00", // point color
    color: "#000000",
    weight: 1,
    fillOpacity: 0.9
};

// Trails (lines)
const trailStyle = {
    color: "#ff0000",     // trail color
    weight: 4,            // trail width
    opacity: 1
};

// Attribute used for labels
const labelField = "Name"; // MUST match field in Stands.geojson

// --------------------
// LAYERS
// --------------------
const standsPoints = L.layerGroup();
const standsLabels = L.layerGroup();
const trailsLayer  = L.layerGroup();

// --------------------
// LOAD STANDS
// --------------------
fetch('Stands.geojson')
    .then(res => res.json())
    .then(data => {

        const standsGeoJSON = L.geoJSON(data, {
            pointToLayer: function (feature, latlng) {

                // Point
                const point = L.circleMarker(latlng, standStyle);
                standsPoints.addLayer(point);

                // Label
                const label = L.marker(latlng, {
                    icon: L.divIcon({
                        className: 'stand-label',
                        html: feature.properties[labelField] || '',
                        iconSize: [0, 0]
                    }),
                    interactive: false
                });
                standsLabels.addLayer(label);

                return null;
            }
        });

        // ðŸ” Zoom to STANDS on initial load
        map.fitBounds(standsGeoJSON.getBounds());
    });

// --------------------
// LOAD TRAILS
// --------------------
fetch('Trails.geojson')
    .then(res => res.json())
    .then(data => {
        const trailsGeoJSON = L.geoJSON(data, {
            style: trailStyle
        });
        trailsLayer.addLayer(trailsGeoJSON);
    });

// Add layers by default
trailsLayer.addTo(map);
standsPoints.addTo(map);
standsLabels.addTo(map);

// --------------------
// LAYER CONTROL
// --------------------
L.control.layers(
    { "ESRI World Imagery": esriImagery },
    {
        "Trails": trailsLayer,
        "Stands (Points)": standsPoints,
        "Stands (Labels)": standsLabels
    },
    { collapsed: false }
).addTo(map);

</script>

</body>
</html>
